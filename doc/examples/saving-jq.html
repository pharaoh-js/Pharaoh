<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jq saving</title>
  <!-- this one saves whatever just fine, and even has a nice-looking non-button button.
       note that it's from an example for dealing with CSV.
  -->
  <style type="text/css">
    a.export,a.export:visited{color:#111;background-color:#ccc;border:1px solid #333;padding:10px;}
  </style>
  <script type="text/javascript" src="http://code.jquery.com/jquery-git.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      function exportTableToCSV($table, filename){
        var $rows = $table.find('tr:has(td)')
          , tmpColDelim = String.fromCharCode(11) // vertical tab character
          , tmpRowDelim = String.fromCharCode(0) // null character
          , colDelim = '","' // csv delimiters
          , rowDelim = '"\r\n"'
          , csv = '"' + $rows.map(function(i, row){ // table txt to csv str
            var $row = $(row)
              , $cols = $row.find('td')
            return $cols.map(function(j, col){
              var $col = $(col)
                , text = $col.text()
              return text.replace(/"/g, '""') // escape double quotes
            }).get().join(tmpColDelim)
          }).get().join(tmpRowDelim)
          .split(tmpRowDelim).join(rowDelim)
          .split(tmpColDelim).join(colDelim) + '"', // data URI
          csvData = 'data:application/csv;charset=utf-8,' + encodeURIComponent(csv)
        $(this)
          .attr({
            'download': filename,
            'href': csvData,
            'target': '_blank'
          })
      }
      $(".export").on('click', function(event){ // must be actual link
        exportTableToCSV.apply(this, [$('#dvData>table'), 'export.csv'])
      }) // if csv, don't do event.preventDefault() or return false
    })
  </script>
</head>
<body>
  <div id="dvData">
    <table>
      <tr>
        <th>Column One</th>
        <th>Column Two</th>
        <th>Column Three</th>
      </tr>
      <tr>
        <td>row3 Col1</td>
        <td>row3 Col2</td>
        <td>row3 Col3</td>
      </tr>
      <tr>
        <td>row4 'Col1'</td>
        <td>row4 'Col2'</td>
        <td>row4 'Col3'</td>
      </tr>
      <tr>
        <td>row5 &quot;Col1&quot;</td>
        <td>row5 &quot;Col2&quot;</td>
        <td>row5 &quot;Col3&quot;</td>
      </tr>
    </table>
  </div>
  <br>
  <a href="javascript:void(0)" class="export">export</a>
</body>
</html>
